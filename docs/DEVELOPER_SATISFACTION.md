# 開発者満足度（Developer Satisfaction）実装ガイド

Notionタスクの満足度スコア（★1〜5）を集計し、開発者満足度を可視化する機能の解説です。

---

## 目次

1. [概要](#概要)
2. [なぜこの指標を選んだか](#なぜこの指標を選んだか)
3. [業界標準との比較](#業界標準との比較)
4. [活用方法](#活用方法)
5. [計測方法](#計測方法)
6. [使い方](#使い方)
7. [出力データ](#出力データ)
8. [Notion設定](#notion設定)
9. [制約事項と将来の拡張](#制約事項と将来の拡張)
10. [出典・参考資料](#出典参考資料)

---

## 概要

### 開発者満足度とは

開発者満足度は、タスク完了時に開発者が入力する**満足度スコア（★1〜5）**を集計した指標です。タスク完了時の満足度を主観的に評価します。

```
タスク完了時の入力フロー:
┌─────────────────────────────────────────┐
│ タスク: ログイン機能の実装              │
│ ステータス: Done ✓                      │
│                                         │
│ 満足度: ★★★★☆ (4/5)                    │
│                                         │
│ → スムーズに完了できた                  │
│ → 大きな障害なく進められた             │
└─────────────────────────────────────────┘
```

### 評価基準の例

| 評価 | 意味 | 例 |
|------|------|-----|
| ★1 | 非常に不満 | 多くの障害があった |
| ★2 | やや不満 | いくつか問題があった |
| ★3 | 普通 | 特に問題なく完了 |
| ★4 | 満足 | スムーズに完了できた |
| ★5 | 非常に満足 | 理想的な進行だった |

### なぜ計測するのか

- **開発体験の可視化**: チームの満足度を把握
- **改善ポイントの発見**: 低評価タスクの原因を特定
- **ベストプラクティス共有**: 高評価タスクのパターンを分析
- **チームの健全性**: 継続的な満足度の推移を追跡

---

## なぜこの指標を選んだか

### 主観的評価を選んだ理由

**1. 直接的なフィードバック**
- 開発者自身が満足度を最も正確に判断できる
- 自動計測では捉えられない質的な体験を反映

**2. シンプルで低コスト**
- タスク完了時に★を選ぶだけ
- 追加のツール導入不要
- Notionのプロパティとして簡単に追加可能

**3. SPACEフレームワークとの整合**
- 「Satisfaction and well-being」ディメンションに直接対応
- 生産性は「アウトプット量」だけでなく「満足度」も重要

### トレードオフ

| 観点 | 主観的評価 | 客観的測定（コード量等） |
|------|-----------|----------------------|
| 正確性 | △ 個人差あり | ○ 数値で明確 |
| 質の反映 | ○ 質的体験も反映 | △ 量のみ |
| 導入コスト | ○ 低い | △ ツール必要 |
| 継続性 | △ 入力忘れのリスク | ○ 自動 |

---

## 業界標準との比較

### SPACEフレームワークとの関連

開発者満足度は、Microsoft ResearchのSPACEフレームワークにおける**Satisfaction and well-being**ディメンションに該当します。

> "Satisfaction is how fulfilled developers feel with their work, team, tools, or culture."
>
> — [Microsoft Research - SPACE Framework](https://queue.acm.org/detail.cfm?id=3454124)

### 他のアプローチとの比較

| アプローチ | 説明 | 本実装との違い |
|-----------|------|--------------|
| eNPS | 推奨度スコア | 組織全体の満足度 |
| アンケート調査 | 定期的な調査 | 頻度が低い |
| **満足度スコア（本実装）** | タスク単位の★評価 | リアルタイム＋シンプル |

---

## 活用方法

### 期待される効果と測定

満足度スコアの傾向から、チームの健全性を把握できます。

```
健全性レベル:

レベル1: 要改善
──────────────────────────────────────
平均: ★2.0〜2.5
分布: ★1-2が多い
→ 開発プロセスに課題あり
→ 原因分析と改善が必要
──────────────────────────────────────

レベル2: 標準
──────────────────────────────────────
平均: ★3.0〜3.5
分布: ★3-4が多い
→ 概ね順調
→ さらなる改善の余地あり
──────────────────────────────────────

レベル3: 良好
──────────────────────────────────────
平均: ★4.0以上
分布: ★4-5が多い
→ 開発体験が良好
→ ベストプラクティスを維持・共有
──────────────────────────────────────
```

### 測定の観点

| 観点 | 説明 | アクション |
|------|------|-----------|
| **平均値の推移** | チームの健全性 | プロセス改善の効果を評価 |
| **担当者別の傾向** | 個人差の把握 | サポートが必要な人を特定 |
| **タスク種別との相関** | どの作業で満足度が低いか | 改善対象を特定 |
| **★1-2が多い場合** | 課題の存在 | 原因分析、プロセス改善 |

### 改善サイクル

```
1. 計測: 満足度スコアを収集
     ↓
2. 分析: 低評価タスクのパターンを特定
     ↓
3. 改善: プロセス改善、ツール調整
     ↓
4. 検証: 平均値の向上を確認
     ↓
（繰り返し）
```

---

## 計測方法

### データソース

Notion APIから以下のデータを取得します：

| エンドポイント | 取得データ | 用途 |
|---------------|-----------|------|
| `POST /databases/{id}/query` | タスク一覧 | 満足度フィールドの取得 |

### 対象タスク

以下の条件を満たすタスクが対象：

1. **完了日が設定されている**（Date Done プロパティ）
2. **満足度スコアが入力されている**（★1〜5）

### 統計値

| 指標 | 説明 |
|------|------|
| 平均（Average） | 全タスクの平均値 |
| 中央値（Median） | ソート後の中央の値 |
| 最小（Min） | 最も低い評価 |
| 最大（Max） | 最も高い評価 |
| 分布 | 各★の件数 |

---

## 使い方

### 基本的な使い方

```javascript
// GASエディタで実行

// 過去30日間の開発者満足度を計測
syncDeveloperSatisfaction();

// 過去90日間の開発者満足度を計測
syncDeveloperSatisfaction(90);

// タスク詳細をログで確認（デバッグ用）
showDeveloperSatisfactionDetails(30);
```

### 前提条件

**1. Notion Integration**

```javascript
setup(
  'ghp_xxxx',           // GitHub PAT
  'spreadsheet-id',     // Google Spreadsheet ID
  'secret_xxxx',        // Notion Token（必須）
  'xxxxxxxx-xxxx-xxxx'  // Notion Database ID（必須）
);
```

**2. Notionデータベースに必要なプロパティ**

- `Date Done` または `完了日`: 日付型
- `満足度` または `Satisfaction`: Select型（★1〜★5）またはNumber型（1〜5）

---

## 出力データ

### スプレッドシート

2つのシートが作成されます：

**「Developer Satisfaction」シート（サマリー）**

| Period | Task Count | Satisfaction (Avg) | Satisfaction (Median) | ★1 Count | ★2 Count | ★3 Count | ★4 Count | ★5 Count | Recorded At |
|--------|------------|----------------------|-------------------------|----------|----------|----------|----------|----------|-------------|
| 2024-01-01〜2024-01-31 | 25 | 3.8 | 4.0 | 1 | 2 | 5 | 10 | 7 | 2024-01-31T... |

**「Developer Satisfaction - Details」シート（タスク詳細）**

| Task ID | Title | Assignee | Completed At | Satisfaction |
|---------|-------|----------|--------------|-----------------|
| abc-123 | ログイン機能実装 | user1 | 2024-01-10T... | ★4 |

### ログ出力例

```
😊 Calculating Developer Satisfaction for 30 days
   Period: 2024-01-01〜2024-01-31
📥 Fetched 25 tasks with satisfaction data
📊 Developer Satisfaction Results:
   Tasks with ratings: 25
   Satisfaction: avg=3.8, median=4
   Distribution: ★1=1, ★2=2, ★3=5, ★4=10, ★5=7
✅ Developer Satisfaction metrics synced
```

---

## Notion設定

### プロパティ設定

**Select型（推奨）**

| プロパティ名 | 型 | 選択肢 |
|-------------|-----|--------|
| 満足度 | Select | ★1, ★2, ★3, ★4, ★5 |

**Number型**

| プロパティ名 | 型 | 範囲 |
|-------------|-----|------|
| 満足度 | Number | 1〜5 |

### 対応プロパティ名

以下の名前が自動認識されます：

- `満足度`
- `Satisfaction`
- `満足度スコア`
- `Score`

---

## 制約事項と将来の拡張

### 現在の制約

| 制約 | 説明 | 対処法 |
|------|------|--------|
| **入力忘れ** | 満足度未入力のタスクは対象外 | リマインダー設定 |
| **主観性** | 個人差がある | チームでの評価基準統一 |
| **回顧的入力** | 後から入力すると精度低下 | タスク完了時に即入力 |

### 計測対象外

- 満足度スコアが未入力のタスク
- 完了日が未設定のタスク

### トラブルシューティング

| 問題 | 原因 | 対処法 |
|------|------|--------|
| 「No tasks found」 | 期間内に完了タスクがない | 期間を広げる |
| 満足度がnull | プロパティ名が異なる | `満足度`に変更 |
| 評価が1-5以外 | 不正な値 | Select型で選択肢を制限 |

### 将来の拡張案

| 機能 | 説明 | 優先度 |
|------|------|--------|
| 担当者別集計 | 誰の満足度が低いか | 高 |
| タスク種別別集計 | どの作業で満足度が低いか | 高 |
| 時系列トレンド | 満足度の推移 | 中 |
| コメント収集 | 低評価時の理由を記録 | 中 |
| チーム比較 | チーム間の満足度比較 | 低 |

---

## 出典・参考資料

### フレームワーク・研究

| # | 資料 | 説明 |
|---|------|------|
| 1 | [SPACE Framework](https://queue.acm.org/detail.cfm?id=3454124) | Microsoft Research。開発者生産性の5ディメンション |

### Notion API

| # | 資料 | 説明 |
|---|------|------|
| 2 | [Query a database](https://developers.notion.com/reference/post-database-query) | データベースクエリAPI |
| 3 | [Property values](https://developers.notion.com/reference/property-value-object) | プロパティ値の取得 |

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2025-01 | 初版作成。開発者満足度計測機能を追加 |
